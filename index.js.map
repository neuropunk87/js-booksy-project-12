{"version":3,"file":"index.js","sources":["../src/js/api.js","../src/js/books.js","../src/js/events.js","../src/js/modal.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE = 'https://books-backend.p.goit.global/books';\n\nexport async function fetchCategories() {\n  const res = await axios.get(`${API_BASE}/category-list`);\n  return res.data;\n}\n\nexport async function fetchBooksByCategory(category) {\n  const res = await axios.get(`${API_BASE}/category`, {\n    params: { category },\n  });\n  return res.data;\n}\n\nexport async function fetchTopBooks() {\n  const res = await axios.get(`${API_BASE}/top-books`);\n  return res.data.flatMap(item => item.books);\n}\n\nexport async function fetchBookById(id) {\n  const res = await axios.get(`${API_BASE}/${id}`);\n  return res.data;\n}\n","import {\n  fetchCategories,\n  fetchBooksByCategory,\n  fetchTopBooks,\n  fetchBookById,\n} from './api.js';\n\nconst booksList = document.getElementById('books-list');\nconst booksCount = document.getElementById('books-count');\nconst showMoreBtn = document.getElementById('show-more-btn');\nconst categoriesDropdownBtn = document.getElementById('categoriesDropdownBtn');\nconst categoriesDropdownList = document.getElementById(\n  'categoriesDropdownList'\n);\nconst categoriesDropdownSelected = document.getElementById(\n  'categoriesDropdownSelected'\n);\nconst sideBarCategoryList = document.querySelector('.sidebar-category-list');\n\n// Буглак: додав функцію перетворення назв так, щоб згідно макету кожне слово з великої літери,\n// а не усі слова великими літерами\nfunction capitalizeWords(str) {\n  return str\n    .split(' ')\n    .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())\n    .join(' ');\n}\n\nlet categoriesArr = [];\nlet selectedDropdownIdx = 0;\nlet allBooks = [];\nlet filteredBooks = [];\nlet displayedCount = 0;\nlet totalCount = 0;\nlet currentCategory = '';\n\nconst BREAKPOINT_TABLET = 768;\nconst BREAKPOINT_DESCTOP = 1440;\nconst BOOKS_PER_PAGE_MOBILE = 10;\nconst BOOKS_PER_PAGE_TABLET = 24;\nconst BOOKS_PER_PAGE_INCREMENT = 4;\n\nfunction getBooksPerPage() {\n  const width = window.innerWidth;\n  if (width < BREAKPOINT_TABLET) return BOOKS_PER_PAGE_MOBILE;\n  return BOOKS_PER_PAGE_TABLET;\n}\nlet booksPerPage = getBooksPerPage();\n\n// // Responsive booksPerPage\nwindow.addEventListener('resize', () => {\n  const newPerPage = getBooksPerPage();\n  if (newPerPage !== booksPerPage) {\n    booksPerPage = newPerPage;\n    displayedCount = Math.min(displayedCount, booksPerPage);\n    renderBooksList();\n  }\n});\n\n// Dropdown\n\nasync function renderCategoriesDropdown() {\n  categoriesArr = await fetchCategories();\n  categoriesDropdownSelected.textContent = 'Categories';\n  categoriesDropdownList.innerHTML = `\n    <li role=\"option\" tabindex=\"0\" data-idx=\"0\" class=\"selected\">All categories</li>\n    ${categoriesArr\n      .map(\n        (cat, idx) =>\n          `<li role=\"option\" tabindex=\"0\" data-idx=\"${idx + 1}\">${\n            cat.list_name\n          }</li>`\n      )\n      .join('')}\n  `;\n}\n\nfunction openCategoriesDropdown() {\n  categoriesDropdownList.classList.add('open');\n  categoriesDropdownBtn.setAttribute('aria-expanded', 'true');\n  setTimeout(() => categoriesDropdownList.focus(), 0);\n}\n\nfunction closeCategoriesDropdown() {\n  categoriesDropdownList.classList.remove('open');\n  categoriesDropdownBtn.setAttribute('aria-expanded', 'false');\n}\n\ncategoriesDropdownBtn.addEventListener('click', e => {\n  if (\n    e.target.closest('.dropdown-arrow-wrap') ||\n    e.target === categoriesDropdownBtn\n  ) {\n    categoriesDropdownList.classList.contains('open')\n      ? closeCategoriesDropdown()\n      : openCategoriesDropdown();\n  }\n});\n\ncategoriesDropdownBtn.addEventListener('keydown', e => {\n  if (e.key === 'Enter' || e.key === ' ' || e.key === 'ArrowDown') {\n    e.preventDefault();\n    openCategoriesDropdown();\n    categoriesDropdownList.querySelector('li.selected')?.focus();\n  }\n});\ncategoriesDropdownList.addEventListener('click', e => {\n  if (e.target.tagName === 'LI') {\n    selectCategoryDropdown(Number(e.target.dataset.idx));\n    closeCategoriesDropdown();\n  }\n});\ncategoriesDropdownList.addEventListener('keydown', e => {\n  const items = Array.from(categoriesDropdownList.querySelectorAll('li'));\n  let idx = items.findIndex(li => li.classList.contains('selected'));\n  if (e.key === 'ArrowDown' && idx < items.length - 1) {\n    e.preventDefault();\n    items[idx].classList.remove('selected');\n    idx++;\n    items[idx].classList.add('selected');\n    items[idx].focus();\n  }\n  if (e.key === 'ArrowUp' && idx > 0) {\n    e.preventDefault();\n    items[idx].classList.remove('selected');\n    idx--;\n    items[idx].classList.add('selected');\n    items[idx].focus();\n  }\n  if (e.key === 'Enter' || e.key === ' ') {\n    e.preventDefault();\n    selectCategoryDropdown(idx);\n    closeCategoriesDropdown();\n    categoriesDropdownBtn.focus();\n  }\n  if (e.key === 'Escape') {\n    closeCategoriesDropdown();\n    categoriesDropdownBtn.focus();\n  }\n});\ndocument.addEventListener('mousedown', e => {\n  if (\n    !categoriesDropdownBtn.contains(e.target) &&\n    !categoriesDropdownList.contains(e.target)\n  )\n    closeCategoriesDropdown();\n});\nfunction selectCategoryDropdown(idx) {\n  selectedDropdownIdx = idx;\n  const items = Array.from(categoriesDropdownList.querySelectorAll('li'));\n  items.forEach(li => li.classList.remove('selected'));\n  items[idx].classList.add('selected');\n  categoriesDropdownSelected.textContent = 'Categories';\n  if (idx === 0) {\n    currentCategory = '';\n    loadBooks('');\n  } else {\n    currentCategory = categoriesArr[idx - 1].list_name;\n    loadBooks(currentCategory);\n  }\n}\n\n// Books loading and rendering\nasync function loadBooks(category = '') {\n  if (category) {\n    allBooks = await fetchBooksByCategory(category);\n  } else {\n    allBooks = await fetchTopBooks();\n  }\n  filteredBooks = allBooks;\n  totalCount = filteredBooks.length;\n  booksPerPage = getBooksPerPage();\n  displayedCount = Math.min(booksPerPage, totalCount);\n  renderBooksList();\n}\n\nfunction renderBook(book) {\n  const { book_image, _id, author, price, title } = book;\n  const width = window.innerWidth;\n  let n;\n  if (width >= BREAKPOINT_DESCTOP) {\n    n = 15;\n  } else if (width < BREAKPOINT_DESCTOP) {\n    n = 30;\n  }\n\n  return `\n    <li class=\"books-item\">\n      <img class=\"books-item__img\" src=\"${book_image}\" alt=\"${title}\">\n      <div class=\"books-item__info\">\n        <h3 class=\"books-item__title\">${getNewTitle(title, n)}</h3>\n        <span class=\"books-item__price\">$${price || '—'}</span>\n      </div>\n      <div class=\"books-item__author\">${getNewTitle(author, 30)}</div>\n      <button type=\"button\" class=\"books-item__btn\" data-id=\"${_id}\">Learn More</button>\n    </li>\n  `;\n}\n\nfunction renderBooksList() {\n  booksList.innerHTML = filteredBooks\n    .slice(0, displayedCount)\n    .map(renderBook)\n    .join('');\n  booksCount.textContent = `Showing ${Math.min(\n    displayedCount,\n    totalCount\n  )} of ${totalCount}`;\n  if (displayedCount >= totalCount) {\n    showMoreBtn.style.display = 'none';\n  } else {\n    showMoreBtn.style.display = 'block';\n  }\n}\n\n// SideBar\nrenderCategoriesSidebar();\n\nasync function renderCategoriesSidebar() {\n  categoriesArr = await fetchCategories();\n  sideBarCategoryList.innerHTML = `\n  <li class=\"sidebar-category\" data-idx=\"0\"\">All categories</li>\n  ${categoriesArr\n    .map(\n      (cat, idx) =>\n        `<li class=\"sidebar-category\" data-idx=\"${idx + 1}\" data-category=\"${\n          cat.list_name\n        }\">${cat.list_name}</li>`\n    )\n    .join('')}\n`;\n  sideBarCategoryList.addEventListener('click', onClick);\n}\n\nfunction onClick(event) {\n  const idx = Number(event.target.dataset.idx);\n  if (idx === 0) {\n    currentCategory = '';\n    loadBooks('');\n  } else {\n    const currentCategory = event.target.dataset.category;\n    loadBooks(currentCategory);\n  }\n}\n\n// Update title in book card\nfunction getNewTitle(string, n) {\n  const arr = string.split(' ');\n  let newArr = [];\n  arr.forEach(item => {\n    newArr.push(item.charAt(0).toUpperCase() + item.slice(1).toLowerCase());\n  });\n  const res = newArr.join(' ');\n  if (res.length >= n) {\n    return res.slice(0, n).trim() + '...';\n  }\n  return res;\n}\n\n// Show More\nshowMoreBtn.addEventListener('click', () => {\n  displayedCount = Math.min(\n    displayedCount + BOOKS_PER_PAGE_INCREMENT,\n    totalCount\n  );\n  renderBooksList();\n});\n\n// Modal open (click on Learn More, imported from modal.js)\nbooksList.addEventListener('click', async e => {\n  if (e.target.classList.contains('books-item__btn')) {\n    const bookId = e.target.dataset.id;\n    const book = await fetchBookById(bookId);\n    if (window.openBookModal && typeof window.openBookModal === 'function') {\n      window.openBookModal(book);\n    }\n  }\n});\n\n(async function initBooksSection() {\n  await renderCategoriesDropdown();\n  selectCategoryDropdown(0);\n})();\n","import 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\n\nimport Swiper from 'swiper';\nimport { Navigation, Pagination } from 'swiper/modules';\nconst swiper = new Swiper('.swiper', {\n  modules: [Navigation, Pagination],\n  slidesPerView: 1,\n  spaceBetween: 24,\n  loop: false,\n\n  pagination: {\n    el: '.swiper-pagination',\n    clickable: true,\n  },\n\n  navigation: {\n    nextEl: '.swiper-button-next',\n    prevEl: '.swiper-button-prev',\n  },\n\n  breakpoints: {\n    768: {\n      slidesPerView: 2,\n    },\n    1440: {\n      slidesPerView: 3,\n    },\n  },\n});","//#region BV book modal\n\nimport Accordion from 'accordion-js';\nimport 'accordion-js/dist/accordion.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Ініціалізація елементів модалки\nconst bookModal = document.querySelector('.book-modal-overlay');\nconst bookModalClose = document.querySelector('.book-modal-close');\n// Можлива ініціалізація інформації про вміст товару в корзині\n// const productAmount = document.querySelector('.prod-count');\nconst counterAdd = document.querySelector('#btn-add');\nconst counterReduce = document.querySelector('#btn-reduce');\nconst counter = document.querySelector('.counter');\nconst addToCart = document.querySelector('.add-btn');\nconst buyNow = document.querySelector('.book-modal-buy-btn');\nconst bookImg = document.querySelector('.book-modal-img');\nconst bookInfo = document.querySelector('#book-modal-info');\nconst bookName = document.querySelector('.book-modal-name');\nconst bookAuthor = document.querySelector('.book-modal-author');\nconst bookPrice = document.querySelector('.book-modal-price');\n\nlet modalCount = 0;\n\n// Нормування назви товару з бази даних (Перша літера лише велика)\nfunction capitalizeFirst(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\n}\n\n// Відкриття модалки (з використанням books.js)\nwindow.openBookModal = function (book) {\n  if (!bookModal) return;\n  \n  // Оновлення даних модалки\n  bookImg.src = book.book_image;\n  bookImg.alt = book.title;\n  bookName.textContent = capitalizeFirst(book.title);\n  bookAuthor.textContent = book.author;\n  bookPrice.textContent = `$${book.price || '—'}`;\n  bookInfo.textContent = book.description || 'No info';\n  counter.textContent = '0';\n  modalCount = 0;\n  // Відкриття самої модалки\n  bookModal.classList.add('open');\n  document.body.style.overflow = 'hidden';\n  bookModalClose && bookModalClose.focus();\n};\n\n// Додавання та віднімання кількості товару\ncounterAdd.addEventListener('click', () => {\n  modalCount++;\n  counter.textContent = modalCount;\n});\n\ncounterReduce.addEventListener('click', () => {\n  if (modalCount === 0) {\n    return;\n  }\n  modalCount--\n  counter.textContent = modalCount;\n});\n\n// Функціонал закриття модалки (кліком по іконці, за межами модалки та натисканням Esc)\nconst modalClose = () => {\n  bookModal.classList.remove('open');\n  document.body.style.overflow = ''\n}\nbookModalClose.addEventListener('click', () => {\n  modalClose();\n});\n\ndocument.addEventListener('keydown', event => {\n  if (event.key !== 'Escape') {\n    return;\n  }\n  modalClose();\n});\n\nbookModal.addEventListener('click', event => {\n  if (event.currentTarget !== event.target) {\n    return;\n  }\n  modalClose();\n});\n\n// Функціонал додавання товару до корзини (незалежно від кількості товару на лічильнику (якщо не 0))\naddToCart.addEventListener('click', () => {\n  if(counter.textContent === '0' || modalCount === 0) {\n    iziToast.error({\n      message: 'Спочатку візьміть товар',\n      position: 'bottomCenter',\n      backgroundColor: '#ad0000',\n      messageColor: \"white\",\n      closeOnClick: true,\n    });\n    return;\n  }\n  const itemCount = localStorage.getItem(bookName.textContent) || 0;\n  const updatedCount = parseInt(itemCount) + modalCount;\n  localStorage.setItem(bookName.textContent, updatedCount);\n  // Можливий функціонал отримання інформації про вміст товару в корзині\n  // productAmount.innerHTML = `Загальна кількість товару в корзині: ${updatedCount}`;\n  iziToast.success({\n    message: `Додано в корзину: ${modalCount} (Цього товару в корзині: ${updatedCount})`,\n    position: 'bottomCenter',\n    backgroundColor: 'var(--color-primary)',\n    messageColor: 'white',\n    closeOnClick: true,\n  });\n  \n});\n\n// Купівля товару (якщо в корзині є цей товар (тобто кількість !== 0))\nbuyNow.addEventListener('click', () => {\n  const storedCount = parseInt(localStorage.getItem(bookName.textContent)) || 0;\n  if (storedCount === 0) {\n    iziToast.error({\n      message: 'Спочатку візьміть товар',\n      closeOnClick: true,\n      position: 'bottomCenter',\n      backgroundColor: '#ad0000',\n      messageColor: 'white',\n    });\n    return;\n  }\n  iziToast.success({\n    message: 'Дякуємо за покупку!',\n    closeOnClick: true,\n    position: 'bottomCenter',\n    backgroundColor: 'var(--color-primary)',\n    messageColor: 'white',\n  });\n});\n\n// Функціонал відкриття вкладок з інформацією про товар, доставку та повернення\nnew Accordion('.accordion-container', {\n  duration: 300,\n  showMultiple: true,\n  onOpen: (currentElement) => {   \n    // Функціонал скроллу після відкриття кожної вкладки на його висоту\n    // (задля зручності користувачу дістатись іншої вкладки без зусиль)\n    const height = currentElement.getBoundingClientRect().height;     \n    bookModal.scrollBy({\n      top: height,\n      behavior: \"smooth\",\n    }); \n  },\n  onClose: () => {\n    // Функціонал скроллу до початку сторінки (саме вікна модалки, тобто bookModal.clientHeight)\n    // у випадку, коли ВСІ вкладки закриті\n    const accordions = document.querySelectorAll('.ac');\n    const anyOpen = Array.from(accordions).some(ac => ac.classList.contains('is-active'));\n    if (!anyOpen) {\n      bookModal.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n    }\n  },\n});\n\n// #endregion BV book modal\n\n// Modal elems\n// const bookModalOverlay = document.getElementById('bookModalOverlay');\n// const bookModalClose = document.getElementById('modalCloseBtn');\n// const modalImg = document.getElementById('modalImg');\n// const modalTitle = document.getElementById('modalTitle');\n// const modalAuthor = document.getElementById('modalAuthor');\n// const modalPrice = document.getElementById('modalPrice');\n// const modalCounter = document.getElementById('modalCounter');\n// const modalMinusBtn = document.getElementById('modalMinusBtn');\n// const modalPlusBtn = document.getElementById('modalPlusBtn');\n// const modalAddBtn = document.getElementById('modalAddBtn');\n// const modalBuyBtn = document.getElementById('modalBuyBtn');\n// const modalAccordion = document.getElementById('modalAccordion');\n\n// let modalCount = 0;\n\n// Closing the modal (cross, click on the bg, esc)\n// function closeModal() {\n//   bookModalOverlay?.classList.remove('open');\n//   document.body.style.overflow = '';\n// }\n// if (bookModalClose) {\n//   bookModalClose.addEventListener('click', closeModal);\n// }\n// if (bookModalOverlay) {\n//   bookModalOverlay.addEventListener('click', e => {\n//     if (e.target === bookModalOverlay) closeModal();\n//   });\n// }\n// document.addEventListener('keydown', e => {\n//   if (e.key === 'Escape' && bookModalOverlay?.classList.contains('open')) {\n//     closeModal();\n//   }\n// });\n\n// Counter\n// if (modalMinusBtn && modalCounter) {\n//   modalMinusBtn.addEventListener('click', () => {\n//     if (modalCount > 0) modalCount--;\n//     modalCounter.textContent = modalCount;\n//   });\n// }\n// if (modalPlusBtn && modalCounter) {\n//   modalPlusBtn.addEventListener('click', () => {\n//     modalCount++;\n//     modalCounter.textContent = modalCount;\n//   });\n// }\n\n// Add to cart\n// if (modalAddBtn) {\n//   modalAddBtn.addEventListener('click', () => {\n//     if(modalCount === 0 || modalCounter.textContent === 0) {\n//         iziToast.error({\n//             message: 'Спочатку візьміть товар',\n//             position: 'bottomCenter',\n//             backgroundColor: '#ad0000',\n//             messageColor: \"white\",\n//             closeOnClick: true,\n//         });\n//         return;\n//     }\n//     iziToast.success({\n//       message: `Добавлено в корзину: ${modalCount}`,\n//       position: 'bottomCenter',\n//       backgroundColor: 'var(--color-primary)',\n//       messageColor: 'white',\n//       closeOnClick: true,\n//     });\n//   });\n// }\n\n\n// Buy now\n// if (modalBuyBtn) {\n//   modalBuyBtn.addEventListener('click', () => {\n//     iziToast.success({\n//       message: 'Дякуємо за покупку',\n//       position: 'bottomCenter',\n//       backgroundColor: 'var(--color-primary)',\n//       messageColor: 'white',\n//       closeOnClick: true,\n//     });\n//   });\n// }\n\n// Accordion (details/shipping/returns)\n// function buildAccordion(book) {\n//   if (!modalAccordion) return;\n//   modalAccordion.innerHTML = '';\n//   const data = [\n//     { title: 'Details', content: book.description || 'No info' },\n//     {\n//       title: 'Shipping',\n//       content:\n//         'We ship across the United States within 2–5 business days. All orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50.',\n//     },\n//     {\n//       title: 'Returns',\n//       content:\n//         'You can return an item within 14 days of receiving your order, provided it hasn’t been used and is in its original condition. To start a return, please contact our support team — we’ll guide you through the process quickly and hassle-free.',\n//     },\n//   ];\n//   data.forEach((item, idx) => {\n//     const section = document.createElement('div');\n//     section.className = 'ac' + (idx === 0 ? ' is-active' : '');\n//     section.innerHTML = `\n//         <h2 class=\"ac-header\">\n//           <button type=\"button\" class=\"ac-trigger\">${item.title}\n//             <div class=\"icon-box\">\n//               <svg class=\"trigger-icon\" width=\"12\" height=\"12\"><use href=\"sprite.svg#smooth-arrow-down\"></use></svg>\n//             </div>\n//           </button>\n//         </h2>\n//         <div class=\"ac-panel\">\n//           <p class=\"ac-text\">${item.content}</p>\n//         </div>\n//       `;\n//     modalAccordion.appendChild(section);\n//   });\n//   new Accordion('.accordion-container', {\n//     duration: 200,\n//     showMultiple: true,\n//     openOnInit: [0],\n//   });\n// }"],"names":["API_BASE","fetchCategories","axios","fetchBooksByCategory","category","fetchTopBooks","item","fetchBookById","id","booksList","booksCount","showMoreBtn","categoriesDropdownBtn","categoriesDropdownList","categoriesDropdownSelected","sideBarCategoryList","categoriesArr","allBooks","filteredBooks","displayedCount","totalCount","currentCategory","BREAKPOINT_TABLET","BREAKPOINT_DESCTOP","BOOKS_PER_PAGE_MOBILE","BOOKS_PER_PAGE_TABLET","BOOKS_PER_PAGE_INCREMENT","getBooksPerPage","booksPerPage","newPerPage","renderBooksList","renderCategoriesDropdown","cat","idx","openCategoriesDropdown","closeCategoriesDropdown","_a","selectCategoryDropdown","items","li","loadBooks","renderBook","book","book_image","_id","author","price","title","width","n","getNewTitle","renderCategoriesSidebar","onClick","event","string","arr","newArr","res","bookId","Swiper","Navigation","Pagination","bookModal","bookModalClose","counterAdd","counterReduce","counter","addToCart","buyNow","bookImg","bookInfo","bookName","bookAuthor","bookPrice","modalCount","capitalizeFirst","str","modalClose","iziToast","itemCount","updatedCount","Accordion","currentElement","height","accordions","ac"],"mappings":"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"}