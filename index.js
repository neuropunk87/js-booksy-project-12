import{a as C,S as ee,N as te,P as oe,A as ne,i as p,b as se}from"./assets/vendor-C69ZXGXy.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const E="https://books-backend.p.goit.global/books";async function W(){return(await C.get(`${E}/category-list`)).data}async function re(e){return(await C.get(`${E}/category`,{params:{category:e}})).data}async function ie(){return(await C.get(`${E}/top-books`)).data.flatMap(t=>t.books)}async function ce(e){return(await C.get(`${E}/${e}`)).data}const A=document.querySelector(".menu-toggle"),J=document.getElementById("mobileMenu"),q=document.querySelector(".close-menu"),g=document.getElementById("backdrop"),I=document.querySelectorAll(".mobile-nav-links a");function ae(){J.classList.add("active"),g.classList.add("active"),document.body.classList.add("menu-open")}function D(){J.classList.remove("active"),g.classList.remove("active"),document.body.classList.remove("menu-open")}A==null||A.addEventListener("click",ae);q==null||q.addEventListener("click",D);g==null||g.addEventListener("click",D);I==null||I.forEach(e=>e.addEventListener("click",D));function S(e=document.body){const t=document.createElement("div");t.className="loader-backdrop",t.style.cssText=`
    position: fixed;
    z-index: 1200;
    inset: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(252,238,230,0.7);
    display: flex;
    align-items: center;
    justify-content: center;
  `,t.innerHTML='<span class="loader"></span>',t.id="main-loader",e.appendChild(t)}function B(){const e=document.getElementById("main-loader");e&&e.remove()}const Q=document.getElementById("books-list"),le=document.getElementById("books-count"),P=document.getElementById("show-more-btn"),d=document.getElementById("categoriesDropdownBtn"),c=document.getElementById("categoriesDropdownList"),X=document.getElementById("categoriesDropdownSelected"),j=document.querySelector(".sidebar-category-list");let v=[],M=[],$=[],l=0,u=0,L="";const de=768,F=1440,ue=10,me=24,pe=4;function N(){return window.innerWidth<de?ue:me}let b=N();window.addEventListener("resize",()=>{const e=N();e!==b&&(b=e,l=Math.min(l,b),H())});async function fe(){S();try{v=await W(),X.textContent="Categories",c.innerHTML=`
    <li role="option" tabindex="0" data-idx="0" class="selected">All categories</li>
    ${v.map((e,t)=>`<li role="option" tabindex="0" data-idx="${t+1}">${e.list_name}</li>`).join("")}
  `}finally{B()}}function Y(){c.classList.add("open"),d.setAttribute("aria-expanded","true"),setTimeout(()=>c.focus(),0)}function k(){c.classList.remove("open"),d.setAttribute("aria-expanded","false")}d.addEventListener("click",e=>{(e.target.closest(".dropdown-arrow-wrap")||e.target===d)&&(c.classList.contains("open")?k():Y())});d.addEventListener("keydown",e=>{var t;(e.key==="Enter"||e.key===" "||e.key==="ArrowDown")&&(e.preventDefault(),Y(),(t=c.querySelector("li.selected"))==null||t.focus())});c.addEventListener("click",e=>{e.target.tagName==="LI"&&(R(Number(e.target.dataset.idx)),k())});c.addEventListener("keydown",e=>{const t=Array.from(c.querySelectorAll("li"));let o=t.findIndex(r=>r.classList.contains("selected"));e.key==="ArrowDown"&&o<t.length-1&&(e.preventDefault(),t[o].classList.remove("selected"),o++,t[o].classList.add("selected"),t[o].focus()),e.key==="ArrowUp"&&o>0&&(e.preventDefault(),t[o].classList.remove("selected"),o--,t[o].classList.add("selected"),t[o].focus()),(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),R(o),k(),d.focus()),e.key==="Escape"&&(k(),d.focus())});document.addEventListener("mousedown",e=>{!d.contains(e.target)&&!c.contains(e.target)&&k()});function R(e){const t=Array.from(c.querySelectorAll("li"));t.forEach(o=>o.classList.remove("selected")),t[e].classList.add("selected"),X.textContent="Categories",e===0?(L="",w("")):(L=v[e-1].list_name,w(L))}async function w(e=""){S();try{e?M=await re(e):M=await ie(),$=M,u=$.length,b=N(),l=Math.min(b,u),H()}finally{B()}}function ye(e){const{book_image:t,_id:o,author:r,price:n,title:s}=e,i=window.innerWidth;let y;return i>=F?y=15:i<F&&(y=30),`
    <li class="books-item">
      <img class="books-item__img" src="${t}" alt="${s}" loading="lazy">
      <div class="books-item__info">
        <h3 class="books-item__title">${G(s,y)}</h3>
        <span class="books-item__price">$${n||"—"}</span>
      </div>
      <div class="books-item__author">${G(r,30)}</div>
      <button type="button" class="books-item__btn" data-id="${o}">Learn More</button>
    </li>
  `}function H(){Q.innerHTML=$.slice(0,l).map(ye).join(""),le.textContent=`Showing ${Math.min(l,u)} of ${u}`,l>=u?P.style.display="none":P.style.display="block"}ge();async function ge(){S();try{v=await W(),j.innerHTML=`
    <li class="sidebar-category" data-idx="0"">All categories</li>
    ${v.map((e,t)=>`<li class="sidebar-category" data-idx="${t+1}" data-category="${e.list_name}">${e.list_name}</li>`).join("")}
  `,j.addEventListener("click",be)}finally{B()}}function be(e){if(Number(e.target.dataset.idx)===0)L="",w("");else{const o=e.target.dataset.category;w(o)}}function G(e,t){const o=e.split(" ");let r=[];o.forEach(s=>{r.push(s.charAt(0).toUpperCase()+s.slice(1).toLowerCase())});const n=r.join(" ");return n.length>=t?n.slice(0,t).trim()+"...":n}P.addEventListener("click",()=>{l=Math.min(l+pe,u),H()});Q.addEventListener("click",async e=>{if(e.target.classList.contains("books-item__btn")){S();try{const t=e.target.dataset.id,o=await ce(t);window.openBookModal&&typeof window.openBookModal=="function"&&window.openBookModal(o)}finally{B()}}});(async function(){await fe(),R(0)})();function ve(){const e=document.querySelector(".swiper.events-carousel");if(!e)return;const t=document.querySelector(".events-button-prev"),o=document.querySelector(".events-button-next"),r=document.querySelector(".swiper-pagination"),n=new ee(e,{modules:[te,oe,ne],slidesPerView:1,spaceBetween:24,observer:!0,observeParents:!0,loop:!0,autoplay:{delay:4e3,disableOnInteraction:!1},speed:800,pagination:{el:r,clickable:!0},navigation:{nextEl:o,prevEl:t},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},on:{init(){s(this)},resize(){s(this)},slideChange(){s(this)}}});e.addEventListener("mouseenter",()=>n.autoplay.stop()),e.addEventListener("mouseleave",()=>n.autoplay.start());function s(i){const y=i.slides.length,Z=Math.floor(i.params.slidesPerView)||1,K=y<=Z;t&&o&&(K?(t.classList.add("is-hidden"),o.classList.add("is-hidden")):(t.classList.remove("is-hidden"),o.classList.remove("is-hidden"),t.classList.toggle("swiper-button-disabled",i.isBeginning),o.classList.toggle("swiper-button-disabled",i.isEnd))),r&&(r.style.display=K?"none":"flex")}}document.addEventListener("DOMContentLoaded",ve);const ke=document.querySelectorAll(".events-register");ke.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const r=t.currentTarget.closest(".events-list-element").querySelector(".events-name").textContent.trim();document.querySelector(".contact-modal-overlay").classList.add("open"),document.body.style.overflow="hidden",document.querySelector(".contact-modal-event").textContent=r})});const f=document.querySelector(".book-modal-overlay"),O=document.querySelector(".book-modal-close"),T=document.querySelector(".prod-count"),Le=document.querySelector("#btn-add"),we=document.querySelector("#btn-reduce"),x=document.querySelector(".counter"),he=document.querySelector(".add-btn"),Ce=document.querySelector(".book-modal-buy-btn"),U=document.querySelector(".book-modal-img"),Ee=document.querySelector("#book-modal-info"),m=document.querySelector(".book-modal-name"),Se=document.querySelector(".book-modal-author"),Be=document.querySelector(".book-modal-price");let a=0;function xe(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}window.openBookModal=function(e){if(!f)return;U.src=e.book_image,U.alt=e.title,m.textContent=xe(e.title),Se.textContent=e.author,Be.textContent=`$${e.price||"—"}`,Ee.textContent=e.description||"No info",x.textContent="0",a=0,f.classList.add("open"),document.body.style.overflow="hidden",O&&O.focus(),localStorage.getItem(m.textContent)||0?T.innerHTML=`Загальна кількість товару в корзині: ${localStorage.getItem(m.textContent)}`:T.innerHTML=""};Le.addEventListener("click",()=>{a++,x.textContent=a});we.addEventListener("click",()=>{a!==0&&(a--,x.textContent=a)});const V=()=>{f.classList.remove("open"),document.body.style.overflow=""};O.addEventListener("click",()=>{V()});document.addEventListener("keydown",e=>{e.key==="Escape"&&V()});f.addEventListener("click",e=>{e.currentTarget===e.target&&V()});he.addEventListener("click",()=>{if(x.textContent==="0"||a===0){p.error({message:"Спочатку візьміть товар",position:"bottomCenter",backgroundColor:"#ad0000",messageColor:"white",closeOnClick:!0});return}const e=localStorage.getItem(m.textContent)||0,t=parseInt(e)+a;localStorage.setItem(m.textContent,t),T.innerHTML=`Загальна кількість товару в корзині: ${t}`,p.success({message:`Додано в корзину: ${a} (Цього товару в корзині: ${t})`,position:"bottomCenter",backgroundColor:"var(--color-primary)",messageColor:"white",closeOnClick:!0})});Ce.addEventListener("click",()=>{if((parseInt(localStorage.getItem(m.textContent))||0)===0){p.error({message:"Спочатку візьміть товар",closeOnClick:!0,position:"bottomCenter",backgroundColor:"#ad0000",messageColor:"white"});return}p.success({message:"Дякуємо за покупку!",closeOnClick:!0,position:"bottomCenter",backgroundColor:"var(--color-primary)",messageColor:"white"})});new se(".accordion-container",{duration:300,showMultiple:!0,onOpen:e=>{const t=e.getBoundingClientRect().height;f.scrollBy({top:t,behavior:"smooth"})},onClose:()=>{const e=document.querySelectorAll(".ac");Array.from(e).some(o=>o.classList.contains("is-active"))||f.scrollTo({top:0,behavior:"smooth"})}});const h=document.querySelector(".contact-modal-overlay"),Ae=document.querySelector(".contact-modal-close"),_=document.querySelector(".contact-modal-form");Ae.addEventListener("click",()=>{h.classList.remove("open"),z()});document.addEventListener("keydown",e=>{e.key==="Escape"&&(h.classList.remove("open"),z())});h.addEventListener("click",e=>{e.currentTarget===e.target&&(h.classList.remove("open"),z())});_.addEventListener("submit",function(e){e.preventDefault();const t=_.querySelectorAll(".contact-form-input");let o=!0;t.forEach(r=>{r.checkValidity()?r.classList.remove("invalid"):(o=!1,r.classList.add("invalid"),p.error({title:"Invalid Input",message:`${r.name} is not valid.`,position:"topRight"}))}),o&&(p.success({title:"Valid Input",message:"Registered successfully.",position:"topRight"}),_.reset())});function z(){document.querySelector(".contact-modal-overlay").classList.remove("open"),document.body.style.overflow=""}
//# sourceMappingURL=index.js.map
