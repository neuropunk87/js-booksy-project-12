import{a as h,S as F,N as G,P as U,i as f,A as W}from"./assets/vendor-Dp5ubpI5.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const v="https://books-backend.p.goit.global/books";async function H(){return(await h.get(`${v}/category-list`)).data}async function J(e){return(await h.get(`${v}/category`,{params:{category:e}})).data}async function Q(){return(await h.get(`${v}/top-books`)).data.flatMap(t=>t.books)}async function X(e){return(await h.get(`${v}/${e}`)).data}const K=document.getElementById("books-list"),Y=document.getElementById("books-count"),A=document.getElementById("show-more-btn"),d=document.getElementById("categoriesDropdownBtn"),i=document.getElementById("categoriesDropdownList"),j=document.getElementById("categoriesDropdownSelected"),D=document.querySelector(".sidebar-category-list");let b=[],S=[],x=[],l=0,u=0,w="";const Z=768,N=1440,ee=10,te=24,oe=4;function q(){return window.innerWidth<Z?ee:te}let y=q();window.addEventListener("resize",()=>{const e=q();e!==y&&(y=e,l=Math.min(l,y),P())});async function ne(){b=await H(),j.textContent="Categories",i.innerHTML=`
    <li role="option" tabindex="0" data-idx="0" class="selected">All categories</li>
    ${b.map((e,t)=>`<li role="option" tabindex="0" data-idx="${t+1}">${e.list_name}</li>`).join("")}
  `}function z(){i.classList.add("open"),d.setAttribute("aria-expanded","true"),setTimeout(()=>i.focus(),0)}function k(){i.classList.remove("open"),d.setAttribute("aria-expanded","false")}d.addEventListener("click",e=>{(e.target.closest(".dropdown-arrow-wrap")||e.target===d)&&(i.classList.contains("open")?k():z())});d.addEventListener("keydown",e=>{var t;(e.key==="Enter"||e.key===" "||e.key==="ArrowDown")&&(e.preventDefault(),z(),(t=i.querySelector("li.selected"))==null||t.focus())});i.addEventListener("click",e=>{e.target.tagName==="LI"&&(M(Number(e.target.dataset.idx)),k())});i.addEventListener("keydown",e=>{const t=Array.from(i.querySelectorAll("li"));let o=t.findIndex(r=>r.classList.contains("selected"));e.key==="ArrowDown"&&o<t.length-1&&(e.preventDefault(),t[o].classList.remove("selected"),o++,t[o].classList.add("selected"),t[o].focus()),e.key==="ArrowUp"&&o>0&&(e.preventDefault(),t[o].classList.remove("selected"),o--,t[o].classList.add("selected"),t[o].focus()),(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),M(o),k(),d.focus()),e.key==="Escape"&&(k(),d.focus())});document.addEventListener("mousedown",e=>{!d.contains(e.target)&&!i.contains(e.target)&&k()});function M(e){const t=Array.from(i.querySelectorAll("li"));t.forEach(o=>o.classList.remove("selected")),t[e].classList.add("selected"),j.textContent="Categories",e===0?(w="",L("")):(w=b[e-1].list_name,L(w))}async function L(e=""){e?S=await J(e):S=await Q(),x=S,u=x.length,y=q(),l=Math.min(y,u),P()}function se(e){const{book_image:t,_id:o,author:r,price:n,title:s}=e,a=window.innerWidth;let p;return a>=N?p=15:a<N&&(p=30),`
    <li class="books-item">
      <img class="books-item__img" src="${t}" alt="${s}">
      <div class="books-item__info">
        <h3 class="books-item__title">${R(s,p)}</h3>
        <span class="books-item__price">$${n||"—"}</span>
      </div>
      <div class="books-item__author">${R(r,30)}</div>
      <button type="button" class="books-item__btn" data-id="${o}">Learn More</button>
    </li>
  `}function P(){K.innerHTML=x.slice(0,l).map(se).join(""),Y.textContent=`Showing ${Math.min(l,u)} of ${u}`,l>=u?A.style.display="none":A.style.display="block"}re();async function re(){b=await H(),D.innerHTML=`
  <li class="sidebar-category" data-idx="0"">All categories</li>
  ${b.map((e,t)=>`<li class="sidebar-category" data-idx="${t+1}" data-category="${e.list_name}">${e.list_name}</li>`).join("")}
`,D.addEventListener("click",ie)}function ie(e){if(Number(e.target.dataset.idx)===0)w="",L("");else{const o=e.target.dataset.category;L(o)}}function R(e,t){const o=e.split(" ");let r=[];o.forEach(s=>{r.push(s.charAt(0).toUpperCase()+s.slice(1).toLowerCase())});const n=r.join(" ");return n.length>=t?n.slice(0,t).trim()+"...":n}A.addEventListener("click",()=>{l=Math.min(l+oe,u),P()});K.addEventListener("click",async e=>{if(e.target.classList.contains("books-item__btn")){const t=e.target.dataset.id,o=await X(t);window.openBookModal&&typeof window.openBookModal=="function"&&window.openBookModal(o)}});(async function(){await ne(),M(0)})();function ce(){const e=document.querySelector(".swiper.events-carousel");if(!e)return;const t=document.querySelector(".events-button-prev"),o=document.querySelector(".events-button-next"),r=document.querySelector(".swiper-pagination");new F(e,{modules:[G,U],slidesPerView:1,spaceBetween:24,observer:!0,observeParents:!0,pagination:{el:r,clickable:!0},navigation:{nextEl:o,prevEl:t},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},on:{init(){n(this)},resize(){n(this)},slideChange(){n(this)}}});function n(s){const a=s.slides.length,p=Math.floor(s.slidesPerView),T=a<=p;t&&o&&(T?(t.classList.add("is-hidden"),o.classList.add("is-hidden")):(t.classList.remove("is-hidden"),o.classList.remove("is-hidden"),t.classList.toggle("swiper-button-disabled",s.isBeginning),o.classList.toggle("swiper-button-disabled",s.isEnd))),r&&(r.style.display=T?"none":"flex")}}document.addEventListener("DOMContentLoaded",ce);const g=document.querySelector(".book-modal-overlay"),_=document.querySelector(".book-modal-close"),I=document.querySelector(".prod-count"),ae=document.querySelector("#btn-add"),le=document.querySelector("#btn-reduce"),E=document.querySelector(".counter"),de=document.querySelector(".add-btn"),ue=document.querySelector(".book-modal-buy-btn"),V=document.querySelector(".book-modal-img"),me=document.querySelector("#book-modal-info"),m=document.querySelector(".book-modal-name"),fe=document.querySelector(".book-modal-author"),ge=document.querySelector(".book-modal-price");let c=0;function pe(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}window.openBookModal=function(e){if(!g)return;V.src=e.book_image,V.alt=e.title,m.textContent=pe(e.title),fe.textContent=e.author,ge.textContent=`$${e.price||"—"}`,me.textContent=e.description||"No info",E.textContent="0",c=0,g.classList.add("open"),document.body.style.overflow="hidden",_&&_.focus(),localStorage.getItem(m.textContent)||0?I.innerHTML=`Загальна кількість товару в корзині: ${localStorage.getItem(m.textContent)}`:I.innerHTML=""};ae.addEventListener("click",()=>{c++,E.textContent=c});le.addEventListener("click",()=>{c!==0&&(c--,E.textContent=c)});const $=()=>{g.classList.remove("open"),document.body.style.overflow=""};_.addEventListener("click",()=>{$()});document.addEventListener("keydown",e=>{e.key==="Escape"&&$()});g.addEventListener("click",e=>{e.currentTarget===e.target&&$()});de.addEventListener("click",()=>{if(E.textContent==="0"||c===0){f.error({message:"Спочатку візьміть товар",position:"bottomCenter",backgroundColor:"#ad0000",messageColor:"white",closeOnClick:!0});return}const e=localStorage.getItem(m.textContent)||0,t=parseInt(e)+c;localStorage.setItem(m.textContent,t),I.innerHTML=`Загальна кількість товару в корзині: ${t}`,f.success({message:`Додано в корзину: ${c} (Цього товару в корзині: ${t})`,position:"bottomCenter",backgroundColor:"var(--color-primary)",messageColor:"white",closeOnClick:!0})});ue.addEventListener("click",()=>{if((parseInt(localStorage.getItem(m.textContent))||0)===0){f.error({message:"Спочатку візьміть товар",closeOnClick:!0,position:"bottomCenter",backgroundColor:"#ad0000",messageColor:"white"});return}f.success({message:"Дякуємо за покупку!",closeOnClick:!0,position:"bottomCenter",backgroundColor:"var(--color-primary)",messageColor:"white"})});new W(".accordion-container",{duration:300,showMultiple:!0,onOpen:e=>{const t=e.getBoundingClientRect().height;g.scrollBy({top:t,behavior:"smooth"})},onClose:()=>{const e=document.querySelectorAll(".ac");Array.from(e).some(o=>o.classList.contains("is-active"))||g.scrollTo({top:0,behavior:"smooth"})}});const C=document.querySelector(".contact-modal-overlay"),ye=document.querySelector(".contact-modal-close"),B=document.querySelector(".contact-modal-form");ye.addEventListener("click",()=>{C.classList.remove("open"),O()});document.addEventListener("keydown",e=>{e.key==="Escape"&&(C.classList.remove("open"),O())});C.addEventListener("click",e=>{e.currentTarget===e.target&&(C.classList.remove("open"),O())});B.addEventListener("submit",function(e){e.preventDefault();const t=B.querySelectorAll(".contact-form-input");let o=!0;t.forEach(r=>{r.checkValidity()?r.classList.remove("invalid"):(o=!1,r.classList.add("invalid"),f.error({title:"Invalid Input",message:`${r.name} is not valid.`,position:"topRight"}))}),o&&(f.success({title:"Valid Input",message:"Registered successfully.",position:"topRight"}),B.reset())});function O(){document.querySelector(".contact-modal-overlay").classList.remove("open"),document.body.style.overflow=""}
//# sourceMappingURL=index.js.map
