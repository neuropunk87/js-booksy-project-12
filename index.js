import{a as A,S as ce,N as le,P as de,K as be,M as he,A as ke,i as u,b as we}from"./assets/vendor-TuT12aV8.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}})();const q="https://books-backend.p.goit.global/books";async function ue(){return(await A.get(`${q}/category-list`)).data}async function Le(e){return(await A.get(`${q}/category`,{params:{category:e}})).data}async function Ce(){return(await A.get(`${q}/top-books`)).data.flatMap(t=>t.books)}async function Ee(e){return(await A.get(`${q}/${e}`)).data}const _=document.querySelector(".menu-toggle"),me=document.getElementById("mobileMenu"),$=document.querySelector(".close-menu"),b=document.getElementById("backdrop"),O=document.querySelectorAll(".mobile-nav-links a");function Se(){me.classList.add("active"),b.classList.add("active"),document.body.classList.add("menu-open")}function F(){me.classList.remove("active"),b.classList.remove("active"),document.body.classList.remove("menu-open")}_==null||_.addEventListener("click",Se);$==null||$.addEventListener("click",F);b==null||b.addEventListener("click",F);O==null||O.forEach(e=>e.addEventListener("click",F));const f=document.querySelectorAll(".slide"),Q=document.querySelector(".prev"),X=document.querySelector(".next");let a=0;function D(e){f.forEach((t,o)=>{t.classList.remove("active"),t.setAttribute("aria-hidden","true"),o===e&&(t.classList.add("active"),t.setAttribute("aria-hidden","false"))})}function ee(e){e.classList.add("is-active"),e.blur(),setTimeout(()=>{e.classList.remove("is-active")},350)}f.length>0&&(Q.addEventListener("click",()=>{a=(a-1+f.length)%f.length,D(a),ee(Q)}),X.addEventListener("click",()=>{a=(a+1)%f.length,D(a),ee(X)}),setInterval(()=>{a=(a+1)%f.length,D(a)},7e3));function T(e=document.body){const t=document.createElement("div");t.className="loader-backdrop",t.style.cssText=`
    position: fixed;
    z-index: 1200;
    inset: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(252,238,230,0.7);
    display: flex;
    align-items: center;
    justify-content: center;
  `,t.innerHTML=`
  <div class="loader">
    <span class="loader-booksy-title">Booksy</span>
  </div>
  `,t.id="main-loader",e.appendChild(t)}function M(){const e=document.getElementById("main-loader");e&&e.remove()}const pe=document.getElementById("books-list"),Be=document.getElementById("books-count"),z=document.getElementById("show-more-btn"),m=document.getElementById("categoriesDropdownBtn"),i=document.getElementById("categoriesDropdownList"),fe=document.getElementById("categoriesDropdownSelected"),te=document.querySelector(".sidebar-category-list");let k=[],oe=[],R=[],d=0,g=0,S="";const xe=768,ne=1440,Ae=10,qe=24,Te=4;function G(){return window.innerWidth<xe?Ae:qe}let h=G();window.addEventListener("resize",()=>{const e=G();e!==h&&(h=e,d=Math.min(d,h),W())});async function Me(){T();try{k=await ue(),fe.textContent="Categories",i.innerHTML=`
    <li role="option" tabindex="0" data-idx="0" class="selected">All categories</li>
    ${k.map((e,t)=>`<li role="option" tabindex="0" data-idx="${t+1}">${e.list_name}</li>`).join("")}
  `}finally{M()}}function ge(){i.classList.add("open"),m.setAttribute("aria-expanded","true"),setTimeout(()=>i.focus(),0)}function w(){i.classList.remove("open"),m.setAttribute("aria-expanded","false")}m.addEventListener("click",e=>{(e.target.closest(".dropdown-arrow-wrap")||e.target===m)&&(i.classList.contains("open")?w():ge())});m.addEventListener("keydown",e=>{var t;(e.key==="Enter"||e.key===" "||e.key==="ArrowDown")&&(e.preventDefault(),ge(),(t=i.querySelector("li.selected"))==null||t.focus())});i.addEventListener("click",e=>{e.target.tagName==="LI"&&(U(Number(e.target.dataset.idx)),w())});i.addEventListener("keydown",e=>{const t=Array.from(i.querySelectorAll("li"));let o=t.findIndex(n=>n.classList.contains("selected"));e.key==="ArrowDown"&&o<t.length-1&&(e.preventDefault(),t[o].classList.remove("selected"),o++,t[o].classList.add("selected"),t[o].focus()),e.key==="ArrowUp"&&o>0&&(e.preventDefault(),t[o].classList.remove("selected"),o--,t[o].classList.add("selected"),t[o].focus()),(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),U(o),w(),m.focus()),e.key==="Escape"&&(w(),m.focus())});document.addEventListener("mousedown",e=>{!m.contains(e.target)&&!i.contains(e.target)&&w()});function U(e){const t=Array.from(i.querySelectorAll("li"));t.forEach(o=>o.classList.remove("selected")),t[e].classList.add("selected"),fe.textContent="Categories",e===0?(S="",B("")):(S=k[e-1].list_name,B(S))}async function B(e=""){T();try{let t=[];e?t=await Le(e):t=await Ce();const o=new Set;oe=t.filter(n=>{const s=n.title.toLowerCase();return o.has(s)?!1:(o.add(s),!0)}),R=oe,g=R.length,h=G(),d=Math.min(h,g),W()}finally{M()}}function Pe(e){const{book_image:t,_id:o,author:n,price:s,title:r}=e,l=window.innerWidth;let p;return l>=ne?p=15:l<ne&&(p=30),`
    <li class="books-item">
      <img class="books-item__img" src="${t}" alt="${r}" loading="lazy">
      <div class="books-item__info">
        <h3 class="books-item__title">${se(r,p)}</h3>
        <span class="books-item__price">$${s||"â€”"}</span>
      </div>
      <div class="books-item__author">${se(n,30)}</div>
      <button type="button" class="books-item__btn" data-id="${o}">Learn More</button>
    </li>
  `}function W(){pe.innerHTML=R.slice(0,d).map(Pe).join(""),Be.textContent=`Showing ${Math.min(d,g)} of ${g}`,d>=g?z.style.display="none":z.style.display="block"}Ie();async function Ie(){T();try{k=await ue(),te.innerHTML=`
    <li class="sidebar-category" data-idx="0"">All categories</li>
    ${k.map((e,t)=>`<li class="sidebar-category" data-idx="${t+1}" data-category="${e.list_name}">${e.list_name}</li>`).join("")}
  `,te.addEventListener("click",_e)}finally{M()}}function _e(e){if(Number(e.target.dataset.idx)===0)S="",B("");else{const o=e.target.dataset.category;B(o)}}function se(e,t){const o=e.split(" ");let n=[];o.forEach(r=>{n.push(r.charAt(0).toUpperCase()+r.slice(1).toLowerCase())});const s=n.join(" ");return s.length>=t?s.slice(0,t).trim()+"...":s}z.addEventListener("click",()=>{d=Math.min(d+Te,g),W()});pe.addEventListener("click",async e=>{if(e.target.classList.contains("books-item__btn")){T();try{const t=e.target.dataset.id,o=await Ee(t);window.openBookModal&&typeof window.openBookModal=="function"&&window.openBookModal(o)}finally{M()}}});(async function(){await Me(),U(0)})();const re=document.querySelector(".swiper-pagination-feedback"),C=document.querySelector(".feedback-button-prev"),E=document.querySelector(".feedback-button-next");new ce(".swiper.feedback-content",{modules:[le,de,be,he],slidesPerView:1,spaceBetween:16,observer:!0,observeParents:!0,speed:800,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},navigation:{nextEl:".feedback-button-next",prevEl:".feedback-button-prev"},pagination:{el:".swiper-pagination-feedback",clickable:!0},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:{forceToAxis:!0},on:{init(){N(this)},resize(){N(this)},slideChange(){N(this)}}});function N(e){const t=e.slides.length,o=Math.floor(e.params.slidesPerView)||1,n=t<=o;C&&E&&(n?(C.classList.add("is-hidden"),E.classList.add("is-hidden")):(C.classList.remove("is-hidden"),E.classList.remove("is-hidden"),C.classList.toggle("swiper-button-disabled",e.isBeginning),E.classList.toggle("swiper-button-disabled",e.isEnd))),re&&(re.style.display=n?"none":"flex")}function $e(){const e=document.querySelector(".swiper.events-carousel");if(!e)return;const t=document.querySelector(".events-button-prev"),o=document.querySelector(".events-button-next"),n=document.querySelector(".swiper-pagination"),l=e.querySelectorAll(".swiper-slide").length>3,p=new ce(e,{modules:[le,de,ke],slidesPerView:1,spaceBetween:24,observer:!0,observeParents:!0,loop:l,autoplay:{delay:4e3,disableOnInteraction:!1},speed:800,pagination:{el:n,clickable:!0},navigation:{nextEl:o,prevEl:t},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},on:{init(){I(this)},resize(){I(this)},slideChange(){I(this)}}});e.addEventListener("mouseenter",()=>p.autoplay.stop()),e.addEventListener("mouseleave",()=>p.autoplay.start());function I(L){const ye=L.slides.length,ve=Math.floor(L.params.slidesPerView)||1,J=ye<=ve;t&&o&&(J?(t.classList.add("is-hidden"),o.classList.add("is-hidden")):(t.classList.remove("is-hidden"),o.classList.remove("is-hidden"),t.classList.toggle("swiper-button-disabled",L.isBeginning),o.classList.toggle("swiper-button-disabled",L.isEnd))),n&&(n.style.display=J?"none":"flex")}}document.addEventListener("DOMContentLoaded",$e);const Oe=document.querySelectorAll(".events-register");Oe.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=t.currentTarget.closest(".events-list-element").querySelector(".events-name").textContent.trim();document.querySelector(".contact-modal-overlay").classList.add("open"),document.body.style.overflow="hidden",document.querySelector(".contact-modal-event").textContent=n})});const De=document.querySelector(".footer-form"),ie=document.querySelector(".footer-form-input");De.addEventListener("submit",function(e){e.preventDefault();const t=ie.value.trim();if(!/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(t)){u.error({message:"Please enter a valid email address.",closeOnClick:!0,position:"topCenter",backgroundColor:"var(--color-invalid)",messageColor:"var(--color-surface-light)"});return}localStorage.setItem("userEmail",t),u.success({message:"Thank you for signing up!",closeOnClick:!0,position:"topCenter",backgroundColor:"var(--color-primary)",messageColor:"var(--color-surface-light)"}),ie.value=""});const v=document.querySelector(".book-modal-overlay"),H=document.querySelector(".book-modal-close"),K=document.querySelector(".prod-count"),Ne=document.querySelector("#btn-add"),Ve=document.querySelector("#btn-reduce"),P=document.querySelector(".counter"),ze=document.querySelector(".add-btn"),Re=document.querySelector(".book-modal-buy-btn"),ae=document.querySelector(".book-modal-img"),He=document.querySelector("#book-modal-info"),y=document.querySelector(".book-modal-name"),Ke=document.querySelector(".book-modal-author"),je=document.querySelector(".book-modal-price");let c=0;function Fe(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}window.openBookModal=function(e){if(!v)return;ae.src=e.book_image,ae.alt=e.title,y.textContent=Fe(e.title),Ke.textContent=e.author,je.textContent=`$${e.price||"â€”"}`,He.textContent=e.description||"No info",P.textContent="0",c=0,v.classList.add("open"),document.body.style.overflow="hidden",H&&H.focus(),localStorage.getItem(y.textContent)||0?K.innerHTML=`Total amount of this product in cart: ${localStorage.getItem(y.textContent)}`:K.innerHTML=""};Ne.addEventListener("click",()=>{c++,P.textContent=c});Ve.addEventListener("click",()=>{c!==0&&(c--,P.textContent=c)});const Z=()=>{v.classList.remove("open"),document.body.style.overflow=""};H.addEventListener("click",()=>{Z()});document.addEventListener("keydown",e=>{e.key==="Escape"&&Z()});v.addEventListener("click",e=>{e.currentTarget===e.target&&Z()});ze.addEventListener("click",()=>{if(P.textContent==="0"||c===0){u.error({message:"Take the product firstly!",position:"topCenter",backgroundColor:"var(--color-invalid)",messageColor:"var(--color-surface-light)",closeOnClick:!0});return}const e=localStorage.getItem(y.textContent)||0,t=parseInt(e)+c;localStorage.setItem(y.textContent,t),K.innerHTML=`Total amount of this product in cart: ${t}`,u.success({message:`Added to cart: ${c} (In cart: ${t} of this product)`,position:"topCenter",backgroundColor:"var(--color-primary)",messageColor:"var(--color-surface-light)",closeOnClick:!0})});Re.addEventListener("click",()=>{if((parseInt(localStorage.getItem(y.textContent))||0)===0){u.error({message:"Take the product firstly!",closeOnClick:!0,position:"topCenter",backgroundColor:"var(--color-invalid)",messageColor:"var(--color-surface-light)"});return}u.success({message:"Thanks for purchasing!",closeOnClick:!0,position:"topCenter",backgroundColor:"var(--color-primary)",messageColor:"var(--color-surface-light)"})});new we(".accordion-container",{duration:300,showMultiple:!0,onOpen:e=>{const t=e.getBoundingClientRect().height;v.scrollBy({top:t,behavior:"smooth"})},onClose:()=>{const e=document.querySelectorAll(".ac");Array.from(e).some(o=>o.classList.contains("is-active"))||v.scrollTo({top:0,behavior:"smooth"})}});const x=document.querySelector(".contact-modal-overlay"),Ge=document.querySelector(".contact-modal-close"),V=document.querySelector(".contact-modal-form");Ge.addEventListener("click",()=>{x.classList.remove("open"),Y()});document.addEventListener("keydown",e=>{e.key==="Escape"&&(x.classList.remove("open"),Y())});x.addEventListener("click",e=>{e.currentTarget===e.target&&(x.classList.remove("open"),Y())});V.addEventListener("submit",function(e){e.preventDefault();const t=V.querySelectorAll(".contact-form-input");let o=!0;t.forEach(n=>{n.checkValidity()?n.classList.remove("invalid"):(o=!1,n.classList.add("invalid"),u.error({message:`${n.name} is not valid.`,position:"topCenter",closeOnClick:!0,backgroundColor:"var(--color-invalid)",messageColor:"var(--color-surface-light)"}))}),o&&(u.success({message:"Registered successfully.",position:"topCenter",closeOnClick:!0,backgroundColor:"var(--color-primary)",messageColor:"var(--color-surface-light)"}),V.reset())});function Y(){document.querySelector(".contact-modal-overlay").classList.remove("open"),document.body.style.overflow=""}const j=document.getElementById("scrollToTopBtn");window.addEventListener("scroll",()=>{const e=window.scrollY,t=window.innerHeight/2;e>t?j.classList.add("show"):j.classList.remove("show")});j.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});
//# sourceMappingURL=index.js.map
