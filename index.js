import{a as y,S as q,N as K,P as H,i as T,A as j}from"./assets/vendor-Dp5ubpI5.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const w="https://books-backend.p.goit.global/books";async function G(){return(await y.get(`${w}/category-list`)).data}async function U(e){return(await y.get(`${w}/category`,{params:{category:e}})).data}async function V(){return(await y.get(`${w}/top-books`)).data.flatMap(t=>t.books)}async function z(e){return(await y.get(`${w}/${e}`)).data}const O=document.getElementById("books-list"),W=document.getElementById("books-count"),k=document.getElementById("show-more-btn"),c=document.getElementById("categoriesDropdownBtn"),a=document.getElementById("categoriesDropdownList"),N=document.getElementById("categoriesDropdownSelected");let L=[],B=[],b=[],r=0,u=0,E="";const F=768,Y=10,J=24,Q=4;function C(){return window.innerWidth<F?Y:J}let m=C();window.addEventListener("resize",()=>{const e=C();e!==m&&(m=e,r=Math.min(r,m),I())});async function X(){L=await G(),N.textContent="Categories",a.innerHTML=`
    <li role="option" tabindex="0" data-idx="0" class="selected">All categories</li>
    ${L.map((e,t)=>`<li role="option" tabindex="0" data-idx="${t+1}">${e.list_name}</li>`).join("")}
  `}function R(){a.classList.add("open"),c.setAttribute("aria-expanded","true"),setTimeout(()=>a.focus(),0)}function p(){a.classList.remove("open"),c.setAttribute("aria-expanded","false")}c.addEventListener("click",e=>{(e.target.closest(".dropdown-arrow-wrap")||e.target===c)&&(a.classList.contains("open")?p():R())});c.addEventListener("keydown",e=>{var t;(e.key==="Enter"||e.key===" "||e.key==="ArrowDown")&&(e.preventDefault(),R(),(t=a.querySelector("li.selected"))==null||t.focus())});a.addEventListener("click",e=>{e.target.tagName==="LI"&&(A(Number(e.target.dataset.idx)),p())});a.addEventListener("keydown",e=>{const t=Array.from(a.querySelectorAll("li"));let o=t.findIndex(l=>l.classList.contains("selected"));e.key==="ArrowDown"&&o<t.length-1&&(e.preventDefault(),t[o].classList.remove("selected"),o++,t[o].classList.add("selected"),t[o].focus()),e.key==="ArrowUp"&&o>0&&(e.preventDefault(),t[o].classList.remove("selected"),o--,t[o].classList.add("selected"),t[o].focus()),(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),A(o),p(),c.focus()),e.key==="Escape"&&(p(),c.focus())});document.addEventListener("mousedown",e=>{!c.contains(e.target)&&!a.contains(e.target)&&p()});function A(e){const t=Array.from(a.querySelectorAll("li"));t.forEach(o=>o.classList.remove("selected")),t[e].classList.add("selected"),N.textContent="Categories",e===0?(E="",P("")):(E=L[e-1].list_name,P(E))}async function P(e=""){e?B=await U(e):B=await V(),b=B,u=b.length,m=C(),r=Math.min(m,u),I()}function Z(e){return`
    <li class="books-item">
      <img class="books-item__img" src="${e.book_image}" alt="${e.title}">
      <div class="books-item__info">
        <h3 class="books-item__title">${e.title}</h3>
        <span class="books-item__price">$${e.price||"—"}</span>
      </div>
      <div class="books-item__author">${e.author}</div>
      <button type="button" class="books-item__btn" data-id="${e._id}">Learn More</button>
    </li>
  `}function I(){O.innerHTML=b.slice(0,r).map(Z).join(""),W.textContent=`Showing ${Math.min(r,u)} of ${u}`,r>=u?k.style.display="none":k.style.display="block"}k.addEventListener("click",()=>{r=Math.min(r+Q,u),I()});O.addEventListener("click",async e=>{if(e.target.classList.contains("books-item__btn")){const t=e.target.dataset.id,o=await z(t);window.openBookModal&&typeof window.openBookModal=="function"&&window.openBookModal(o)}});(async function(){await X(),A(0)})();new q(".swiper",{modules:[K,H],slidesPerView:1,spaceBetween:24,loop:!1,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}}});const i=document.getElementById("bookModalOverlay"),g=document.getElementById("modalCloseBtn"),$=document.getElementById("modalImg"),ee=document.getElementById("modalTitle"),te=document.getElementById("modalAuthor"),oe=document.getElementById("modalPrice"),f=document.getElementById("modalCounter"),x=document.getElementById("modalMinusBtn"),M=document.getElementById("modalPlusBtn"),S=document.getElementById("modalAddBtn"),D=document.getElementById("modalBuyBtn"),v=document.getElementById("modalAccordion");let d=1;window.openBookModal=function(e){i&&($.src=e.book_image,$.alt=e.title,ee.textContent=e.title,te.textContent=e.author,oe.textContent=`$${e.price||"—"}`,f.textContent="1",d=1,ne(e),i.classList.add("open"),document.body.style.overflow="hidden",g&&g.focus())};function _(){i==null||i.classList.remove("open"),document.body.style.overflow=""}g&&g.addEventListener("click",_);i&&i.addEventListener("click",e=>{e.target===i&&_()});document.addEventListener("keydown",e=>{e.key==="Escape"&&(i!=null&&i.classList.contains("open"))&&_()});x&&f&&x.addEventListener("click",()=>{d>1&&d--,f.textContent=d});M&&f&&M.addEventListener("click",()=>{d++,f.textContent=d});S&&S.addEventListener("click",()=>{T.success({message:`Добавлено в корзину: ${d}`,position:"bottomCenter",backgroundColor:"var(--color-primary)",messageColor:"white"})});D&&D.addEventListener("click",()=>{T.success({message:"Дякуємо за покупку",position:"bottomCenter",backgroundColor:"var(--color-primary)",messageColor:"white"})});function ne(e){if(!v)return;v.innerHTML="",[{title:"Details",content:e.description||"No info"},{title:"Shipping",content:"We ship across the United States within 2–5 business days. All orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50."},{title:"Returns",content:"You can return an item within 14 days of receiving your order, provided it hasn’t been used and is in its original condition. To start a return, please contact our support team — we’ll guide you through the process quickly and hassle-free."}].forEach((o,l)=>{const n=document.createElement("div");n.className="ac"+(l===0?" is-active":""),n.innerHTML=`
        <h2 class="ac-header">
          <button type="button" class="ac-trigger">${o.title}
            <div class="icon-box">
              <svg class="trigger-icon" width="12" height="12"><use href="sprite.svg#smooth-arrow-down"></use></svg>
            </div>
          </button>
        </h2>
        <div class="ac-panel">
          <p class="ac-text">${o.content}</p>
        </div>
      `,v.appendChild(n)}),new j(".accordion-container",{duration:200,showMultiple:!1,openOnInit:[0]})}
//# sourceMappingURL=index.js.map
