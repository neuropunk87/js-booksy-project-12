import{a as B,S as oe,N as ne,P as se,K as ue,M as me,A as pe,b as fe,i as y,c as ye}from"./assets/vendor-yHFt1Iqr.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const x="https://books-backend.p.goit.global/books";async function ie(){return(await B.get(`${x}/category-list`)).data}async function ge(e){return(await B.get(`${x}/category`,{params:{category:e}})).data}async function ve(){return(await B.get(`${x}/top-books`)).data.flatMap(t=>t.books)}async function be(e){return(await B.get(`${x}/${e}`)).data}const M=document.querySelector(".menu-toggle"),re=document.getElementById("mobileMenu"),_=document.querySelector(".close-menu"),b=document.getElementById("backdrop"),T=document.querySelectorAll(".mobile-nav-links a");function we(){re.classList.add("active"),b.classList.add("active"),document.body.classList.add("menu-open")}function H(){re.classList.remove("active"),b.classList.remove("active"),document.body.classList.remove("menu-open")}M==null||M.addEventListener("click",we);_==null||_.addEventListener("click",H);b==null||b.addEventListener("click",H);T==null||T.forEach(e=>e.addEventListener("click",H));const m=document.querySelectorAll(".slide"),Z=document.querySelector(".prev"),Y=document.querySelector(".next");let c=0;function P(e){m.forEach((t,o)=>{t.classList.remove("active"),t.setAttribute("aria-hidden","true"),o===e&&(t.classList.add("active"),t.setAttribute("aria-hidden","false"))})}function J(e){e.classList.add("is-active"),e.blur(),setTimeout(()=>{e.classList.remove("is-active")},350)}m.length>0&&(Z.addEventListener("click",()=>{c=(c-1+m.length)%m.length,P(c),J(Z)}),Y.addEventListener("click",()=>{c=(c+1)%m.length,P(c),J(Y)}),setInterval(()=>{c=(c+1)%m.length,P(c)},7e3));function A(e=document.body){const t=document.createElement("div");t.className="loader-backdrop",t.style.cssText=`
    position: fixed;
    z-index: 1200;
    inset: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(252,238,230,0.7);
    display: flex;
    align-items: center;
    justify-content: center;
  `,t.innerHTML=`
  <div class="loader">
    <span class="loader-booksy-title">Booksy</span>
  </div>
  `,t.id="main-loader",e.appendChild(t)}function q(){const e=document.getElementById("main-loader");e&&e.remove()}const ae=document.getElementById("books-list"),Le=document.getElementById("books-count"),D=document.getElementById("show-more-btn"),u=document.getElementById("categoriesDropdownBtn"),a=document.getElementById("categoriesDropdownList"),ce=document.getElementById("categoriesDropdownSelected"),Q=document.querySelector(".sidebar-category-list");let L=[],$=[],N=[],d=0,p=0,k="";const he=768,X=1440,ke=10,Ee=24,Ce=4;function K(){return window.innerWidth<he?ke:Ee}let w=K();window.addEventListener("resize",()=>{const e=K();e!==w&&(w=e,d=Math.min(d,w),F())});async function Se(){A();try{L=await ie(),ce.textContent="Categories",a.innerHTML=`
    <li role="option" tabindex="0" data-idx="0" class="selected">All categories</li>
    ${L.map((e,t)=>`<li role="option" tabindex="0" data-idx="${t+1}">${e.list_name}</li>`).join("")}
  `}finally{q()}}function le(){a.classList.add("open"),u.setAttribute("aria-expanded","true"),setTimeout(()=>a.focus(),0)}function h(){a.classList.remove("open"),u.setAttribute("aria-expanded","false")}u.addEventListener("click",e=>{(e.target.closest(".dropdown-arrow-wrap")||e.target===u)&&(a.classList.contains("open")?h():le())});u.addEventListener("keydown",e=>{var t;(e.key==="Enter"||e.key===" "||e.key==="ArrowDown")&&(e.preventDefault(),le(),(t=a.querySelector("li.selected"))==null||t.focus())});a.addEventListener("click",e=>{e.target.tagName==="LI"&&(j(Number(e.target.dataset.idx)),h())});a.addEventListener("keydown",e=>{const t=Array.from(a.querySelectorAll("li"));let o=t.findIndex(i=>i.classList.contains("selected"));e.key==="ArrowDown"&&o<t.length-1&&(e.preventDefault(),t[o].classList.remove("selected"),o++,t[o].classList.add("selected"),t[o].focus()),e.key==="ArrowUp"&&o>0&&(e.preventDefault(),t[o].classList.remove("selected"),o--,t[o].classList.add("selected"),t[o].focus()),(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),j(o),h(),u.focus()),e.key==="Escape"&&(h(),u.focus())});document.addEventListener("mousedown",e=>{!u.contains(e.target)&&!a.contains(e.target)&&h()});function j(e){const t=Array.from(a.querySelectorAll("li"));t.forEach(o=>o.classList.remove("selected")),t[e].classList.add("selected"),ce.textContent="Categories",e===0?(k="",C("")):(k=L[e-1].list_name,C(k))}async function C(e=""){A();try{e?$=await ge(e):$=await ve(),N=$,p=N.length,w=K(),d=Math.min(w,p),F()}finally{q()}}function Be(e){const{book_image:t,_id:o,author:i,price:n,title:s}=e,r=window.innerWidth;let v;return r>=X?v=15:r<X&&(v=30),`
    <li class="books-item">
      <img class="books-item__img" src="${t}" alt="${s}" loading="lazy">
      <div class="books-item__info">
        <h3 class="books-item__title">${ee(s,v)}</h3>
        <span class="books-item__price">$${n||"—"}</span>
      </div>
      <div class="books-item__author">${ee(i,30)}</div>
      <button type="button" class="books-item__btn" data-id="${o}">Learn More</button>
    </li>
  `}function F(){ae.innerHTML=N.slice(0,d).map(Be).join(""),Le.textContent=`Showing ${Math.min(d,p)} of ${p}`,d>=p?D.style.display="none":D.style.display="block"}xe();async function xe(){A();try{L=await ie(),Q.innerHTML=`
    <li class="sidebar-category" data-idx="0"">All categories</li>
    ${L.map((e,t)=>`<li class="sidebar-category" data-idx="${t+1}" data-category="${e.list_name}">${e.list_name}</li>`).join("")}
  `,Q.addEventListener("click",Ae)}finally{q()}}function Ae(e){if(Number(e.target.dataset.idx)===0)k="",C("");else{const o=e.target.dataset.category;C(o)}}function ee(e,t){const o=e.split(" ");let i=[];o.forEach(s=>{i.push(s.charAt(0).toUpperCase()+s.slice(1).toLowerCase())});const n=i.join(" ");return n.length>=t?n.slice(0,t).trim()+"...":n}D.addEventListener("click",()=>{d=Math.min(d+Ce,p),F()});ae.addEventListener("click",async e=>{if(e.target.classList.contains("books-item__btn")){A();try{const t=e.target.dataset.id,o=await be(t);window.openBookModal&&typeof window.openBookModal=="function"&&window.openBookModal(o)}finally{q()}}});(async function(){await Se(),j(0)})();const E=new oe(".feedback-content",{modules:[ne,se,ue,me,pe],slidesPerView:1,spaceBetween:24,loop:!1,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:{forceToAxis:!0},a11y:{enabled:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}});E.on("slideChange",()=>{const e=document.querySelector(".swiper-button-prev"),t=document.querySelector(".swiper-button-next");E.isBeginning?e.classList.add("is-disabled"):e.classList.remove("is-disabled"),E.isEnd?t.classList.add("is-disabled"):t.classList.remove("is-disabled")});E.emit("slideChange");function qe(){const e=document.querySelector(".swiper.events-carousel");if(!e)return;const t=document.querySelector(".events-button-prev"),o=document.querySelector(".events-button-next"),i=document.querySelector(".swiper-pagination"),n=new oe(e,{modules:[ne,se,fe],slidesPerView:1,spaceBetween:24,observer:!0,observeParents:!0,loop:!0,autoplay:{delay:4e3,disableOnInteraction:!1},speed:800,pagination:{el:i,clickable:!0},navigation:{nextEl:o,prevEl:t},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},on:{init(){s(this)},resize(){s(this)},slideChange(){s(this)}}});e.addEventListener("mouseenter",()=>n.autoplay.stop()),e.addEventListener("mouseleave",()=>n.autoplay.start());function s(r){const v=r.slides.length,de=Math.floor(r.params.slidesPerView)||1,W=v<=de;t&&o&&(W?(t.classList.add("is-hidden"),o.classList.add("is-hidden")):(t.classList.remove("is-hidden"),o.classList.remove("is-hidden"),t.classList.toggle("swiper-button-disabled",r.isBeginning),o.classList.toggle("swiper-button-disabled",r.isEnd))),i&&(i.style.display=W?"none":"flex")}}document.addEventListener("DOMContentLoaded",qe);const Ie=document.querySelectorAll(".events-register");Ie.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const i=t.currentTarget.closest(".events-list-element").querySelector(".events-name").textContent.trim();document.querySelector(".contact-modal-overlay").classList.add("open"),document.body.style.overflow="hidden",document.querySelector(".contact-modal-event").textContent=i})});const Me=document.querySelector(".footer-form"),_e=document.querySelector(".footer-form-input");Me.addEventListener("submit",function(e){const t=_e.value.trim();if(!/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(t)){e.preventDefault(),alert("Please enter a valid email address.");return}localStorage.setItem("userEmail",t),alert("Thank you for signing up!")});const g=document.querySelector(".book-modal-overlay"),V=document.querySelector(".book-modal-close"),R=document.querySelector(".prod-count"),Te=document.querySelector("#btn-add"),Pe=document.querySelector("#btn-reduce"),I=document.querySelector(".counter"),$e=document.querySelector(".add-btn"),Oe=document.querySelector(".book-modal-buy-btn"),te=document.querySelector(".book-modal-img"),De=document.querySelector("#book-modal-info"),f=document.querySelector(".book-modal-name"),Ne=document.querySelector(".book-modal-author"),Ve=document.querySelector(".book-modal-price");let l=0;function Re(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}window.openBookModal=function(e){if(!g)return;te.src=e.book_image,te.alt=e.title,f.textContent=Re(e.title),Ne.textContent=e.author,Ve.textContent=`$${e.price||"—"}`,De.textContent=e.description||"No info",I.textContent="0",l=0,g.classList.add("open"),document.body.style.overflow="hidden",V&&V.focus(),localStorage.getItem(f.textContent)||0?R.innerHTML=`Загальна кількість товару в корзині: ${localStorage.getItem(f.textContent)}`:R.innerHTML=""};Te.addEventListener("click",()=>{l++,I.textContent=l});Pe.addEventListener("click",()=>{l!==0&&(l--,I.textContent=l)});const G=()=>{g.classList.remove("open"),document.body.style.overflow=""};V.addEventListener("click",()=>{G()});document.addEventListener("keydown",e=>{e.key==="Escape"&&G()});g.addEventListener("click",e=>{e.currentTarget===e.target&&G()});$e.addEventListener("click",()=>{if(I.textContent==="0"||l===0){y.error({message:"Спочатку візьміть товар",position:"bottomCenter",backgroundColor:"#ad0000",messageColor:"white",closeOnClick:!0});return}const e=localStorage.getItem(f.textContent)||0,t=parseInt(e)+l;localStorage.setItem(f.textContent,t),R.innerHTML=`Загальна кількість товару в корзині: ${t}`,y.success({message:`Додано в корзину: ${l} (Цього товару в корзині: ${t})`,position:"bottomCenter",backgroundColor:"var(--color-primary)",messageColor:"white",closeOnClick:!0})});Oe.addEventListener("click",()=>{if((parseInt(localStorage.getItem(f.textContent))||0)===0){y.error({message:"Спочатку візьміть товар",closeOnClick:!0,position:"bottomCenter",backgroundColor:"#ad0000",messageColor:"white"});return}y.success({message:"Дякуємо за покупку!",closeOnClick:!0,position:"bottomCenter",backgroundColor:"var(--color-primary)",messageColor:"white"})});new ye(".accordion-container",{duration:300,showMultiple:!0,onOpen:e=>{const t=e.getBoundingClientRect().height;g.scrollBy({top:t,behavior:"smooth"})},onClose:()=>{const e=document.querySelectorAll(".ac");Array.from(e).some(o=>o.classList.contains("is-active"))||g.scrollTo({top:0,behavior:"smooth"})}});const S=document.querySelector(".contact-modal-overlay"),ze=document.querySelector(".contact-modal-close"),O=document.querySelector(".contact-modal-form");ze.addEventListener("click",()=>{S.classList.remove("open"),U()});document.addEventListener("keydown",e=>{e.key==="Escape"&&(S.classList.remove("open"),U())});S.addEventListener("click",e=>{e.currentTarget===e.target&&(S.classList.remove("open"),U())});O.addEventListener("submit",function(e){e.preventDefault();const t=O.querySelectorAll(".contact-form-input");let o=!0;t.forEach(i=>{i.checkValidity()?i.classList.remove("invalid"):(o=!1,i.classList.add("invalid"),y.error({title:"Invalid Input",message:`${i.name} is not valid.`,position:"topRight"}))}),o&&(y.success({title:"Valid Input",message:"Registered successfully.",position:"topRight"}),O.reset())});function U(){document.querySelector(".contact-modal-overlay").classList.remove("open"),document.body.style.overflow=""}const z=document.getElementById("scrollToTopBtn");window.addEventListener("scroll",()=>{const e=window.scrollY,t=window.innerHeight/2;e>t?z.classList.add("show"):z.classList.remove("show")});z.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});
//# sourceMappingURL=index.js.map
