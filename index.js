import{a as y,i as T,A as q}from"./assets/vendor-BOUMGWLJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const w="https://books-backend.p.goit.global/books";async function K(){return(await y.get(`${w}/category-list`)).data}async function H(e){return(await y.get(`${w}/category`,{params:{category:e}})).data}async function j(){return(await y.get(`${w}/top-books`)).data.flatMap(t=>t.books)}async function G(e){return(await y.get(`${w}/${e}`)).data}const O=document.getElementById("books-list"),U=document.getElementById("books-count"),k=document.getElementById("show-more-btn"),c=document.getElementById("categoriesDropdownBtn"),r=document.getElementById("categoriesDropdownList"),N=document.getElementById("categoriesDropdownSelected");let v=[],B=[],b=[],a=0,u=0,E="";const z=768,W=10,F=24,Y=4;function C(){return window.innerWidth<z?W:F}let m=C();window.addEventListener("resize",()=>{const e=C();e!==m&&(m=e,a=Math.min(a,m),I())});async function J(){v=await K(),N.textContent="Categories",r.innerHTML=`
    <li role="option" tabindex="0" data-idx="0" class="selected">All categories</li>
    ${v.map((e,t)=>`<li role="option" tabindex="0" data-idx="${t+1}">${e.list_name}</li>`).join("")}
  `}function R(){r.classList.add("open"),c.setAttribute("aria-expanded","true"),setTimeout(()=>r.focus(),0)}function f(){r.classList.remove("open"),c.setAttribute("aria-expanded","false")}c.addEventListener("click",e=>{(e.target.closest(".dropdown-arrow-wrap")||e.target===c)&&(r.classList.contains("open")?f():R())});c.addEventListener("keydown",e=>{var t;(e.key==="Enter"||e.key===" "||e.key==="ArrowDown")&&(e.preventDefault(),R(),(t=r.querySelector("li.selected"))==null||t.focus())});r.addEventListener("click",e=>{e.target.tagName==="LI"&&(A(Number(e.target.dataset.idx)),f())});r.addEventListener("keydown",e=>{const t=Array.from(r.querySelectorAll("li"));let o=t.findIndex(l=>l.classList.contains("selected"));e.key==="ArrowDown"&&o<t.length-1&&(e.preventDefault(),t[o].classList.remove("selected"),o++,t[o].classList.add("selected"),t[o].focus()),e.key==="ArrowUp"&&o>0&&(e.preventDefault(),t[o].classList.remove("selected"),o--,t[o].classList.add("selected"),t[o].focus()),(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),A(o),f(),c.focus()),e.key==="Escape"&&(f(),c.focus())});document.addEventListener("mousedown",e=>{!c.contains(e.target)&&!r.contains(e.target)&&f()});function A(e){const t=Array.from(r.querySelectorAll("li"));t.forEach(o=>o.classList.remove("selected")),t[e].classList.add("selected"),N.textContent="Categories",e===0?(E="",P("")):(E=v[e-1].list_name,P(E))}async function P(e=""){e?B=await H(e):B=await j(),b=B,u=b.length,m=C(),a=Math.min(m,u),I()}function Q(e){return`
    <li class="books-item">
      <img class="books-item__img" src="${e.book_image}" alt="${e.title}">
      <div class="books-item__info">
        <h3 class="books-item__title">${e.title}</h3>
        <span class="books-item__price">$${e.price||"—"}</span>
      </div>
      <div class="books-item__author">${e.author}</div>
      <button type="button" class="books-item__btn" data-id="${e._id}">Learn More</button>
    </li>
  `}function I(){O.innerHTML=b.slice(0,a).map(Q).join(""),U.textContent=`Showing ${Math.min(a,u)} of ${u}`,a>=u?k.style.display="none":k.style.display="block"}k.addEventListener("click",()=>{a=Math.min(a+Y,u),I()});O.addEventListener("click",async e=>{if(e.target.classList.contains("books-item__btn")){const t=e.target.dataset.id,o=await G(t);window.openBookModal&&typeof window.openBookModal=="function"&&window.openBookModal(o)}});(async function(){await J(),A(0)})();const i=document.getElementById("bookModalOverlay"),p=document.getElementById("modalCloseBtn"),$=document.getElementById("modalImg"),V=document.getElementById("modalTitle"),X=document.getElementById("modalAuthor"),Z=document.getElementById("modalPrice"),g=document.getElementById("modalCounter"),M=document.getElementById("modalMinusBtn"),x=document.getElementById("modalPlusBtn"),D=document.getElementById("modalAddBtn"),S=document.getElementById("modalBuyBtn"),L=document.getElementById("modalAccordion");let d=1;window.openBookModal=function(e){i&&($.src=e.book_image,$.alt=e.title,V.textContent=e.title,X.textContent=e.author,Z.textContent=`$${e.price||"—"}`,g.textContent="1",d=1,ee(e),i.classList.add("open"),document.body.style.overflow="hidden",p&&p.focus())};function _(){i==null||i.classList.remove("open"),document.body.style.overflow=""}p&&p.addEventListener("click",_);i&&i.addEventListener("click",e=>{e.target===i&&_()});document.addEventListener("keydown",e=>{e.key==="Escape"&&(i!=null&&i.classList.contains("open"))&&_()});M&&g&&M.addEventListener("click",()=>{d>1&&d--,g.textContent=d});x&&g&&x.addEventListener("click",()=>{d++,g.textContent=d});D&&D.addEventListener("click",()=>{T.success({message:`Добавлено в корзину: ${d}`,position:"bottomCenter",backgroundColor:"var(--color-primary)",messageColor:"white"})});S&&S.addEventListener("click",()=>{T.success({message:"Дякуємо за покупку",position:"bottomCenter",backgroundColor:"var(--color-primary)",messageColor:"white"})});function ee(e){if(!L)return;L.innerHTML="",[{title:"Details",content:e.description||"No info"},{title:"Shipping",content:"We ship across the United States within 2–5 business days. All orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50."},{title:"Returns",content:"You can return an item within 14 days of receiving your order, provided it hasn’t been used and is in its original condition. To start a return, please contact our support team — we’ll guide you through the process quickly and hassle-free."}].forEach((o,l)=>{const n=document.createElement("div");n.className="ac"+(l===0?" is-active":""),n.innerHTML=`
        <h2 class="ac-header">
          <button type="button" class="ac-trigger">${o.title}
            <div class="icon-box">
              <svg class="trigger-icon" width="12" height="12"><use href="sprite.svg#smooth-arrow-down"></use></svg>
            </div>
          </button>
        </h2>
        <div class="ac-panel">
          <p class="ac-text">${o.content}</p>
        </div>
      `,L.appendChild(n)}),new q(".accordion-container",{duration:200,showMultiple:!1,openOnInit:[0]})}
//# sourceMappingURL=index.js.map
